<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citas Programadas</title>
    <!-- Tailwind CSS CDN para estilos modernos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Material Icons para los iconos -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .calendar-grid {
            grid-template-columns: repeat(7, 1fr);
        }
        .day-cell {
            aspect-ratio: 1;
        }
        .has-appointment {
            background-color: #fca5a5;
            color: #b91c1c;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans text-gray-800">
    <!-- Sección de Citas Programadas -->
    <div class="flex-1 flex flex-col max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in">
        <!-- Botón para volver al panel principal -->
        <button id="back-to-main" class="self-start mb-6 flex items-center text-gray-600 hover:text-blue-500 transition-colors">
            <span class="material-icons transform rotate-180">chevron_right</span>
            <span class="ml-2 font-medium">Volver al Panel Principal</span>
        </button>

        <!-- Título de la sección -->
        <h2 class="text-3xl font-bold text-gray-900 mb-4">Citas Programadas</h2>

        <!-- Contenedor del calendario -->
        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
            <!-- Encabezado del calendario -->
            <div class="flex justify-between items-center mb-4">
                <button id="prev-month" class="text-gray-500 hover:text-gray-700">
                    <span class="material-icons text-3xl">chevron_left</span>
                </button>
                <h3 id="calendar-title" class="text-xl font-bold text-gray-800">Septiembre 2024</h3>
                <button id="next-month" class="text-gray-500 hover:text-gray-700">
                    <span class="material-icons text-3xl">chevron_right</span>
                </button>
            </div>
            <!-- Días de la semana -->
            <div class="grid calendar-grid text-center font-semibold text-sm text-gray-500 mb-2">
                <span>Lun</span>
                <span>Mar</span>
                <span>Mié</span>
                <span>Jue</span>
                <span>Vie</span>
                <span>Sáb</span>
                <span>Dom</span>
            </div>
            <!-- Cuadrícula de días del calendario -->
            <div id="calendar-body" class="grid calendar-grid text-center text-lg">
                <!-- Los días del calendario se generarán aquí con JavaScript -->
            </div>
        </div>

        <!-- Información de la cita seleccionada -->
        <div id="appointment-details" class="mt-6 bg-white p-6 rounded-2xl shadow-sm border border-gray-200 hidden animate-fade-in">
            <h3 class="text-xl font-bold mb-2 text-gray-900">Detalles del día seleccionado</h3>
            <p class="text-gray-700" id="selected-date"></p>
            <div id="appointment-info" class="text-gray-700 mt-2"></div>
        </div>

        <!-- Lista de próximas citas -->
        <div class="mt-6 bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
            <h3 class="text-xl font-bold mb-4 text-gray-900">Próximas Citas</h3>
            <div class="space-y-4">
                <div class="flex items-center p-4 bg-red-50 rounded-lg border-l-4 border-red-400">
                    <span class="material-icons text-red-500 mr-3">event</span>
                    <div>
                        <p class="font-semibold text-gray-900">Terapia de Mindfulness</p>
                        <p class="text-sm text-gray-600">24 de septiembre, 2024 - 10:00 AM</p>
                        <p class="text-xs text-gray-500">Dr. Ana García - Consultorio Virtual</p>
                    </div>
                </div>
                <div class="flex items-center p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                    <span class="material-icons text-blue-500 mr-3">psychology</span>
                    <div>
                        <p class="font-semibold text-gray-900">Sesión de Seguimiento</p>
                        <p class="text-sm text-gray-600">1 de octubre, 2024 - 2:00 PM</p>
                        <p class="text-xs text-gray-500">Lic. Carlos Mendoza - Presencial</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const calendarBody = document.getElementById('calendar-body');
            const appointmentDetails = document.getElementById('appointment-details');
            const selectedDateEl = document.getElementById('selected-date');
            const appointmentInfoEl = document.getElementById('appointment-info');
            const calendarTitle = document.getElementById('calendar-title');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');

            let currentMonth = 8; // Septiembre (0-11)
            let currentYear = 2024;

            const months = [
                'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
                'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
            ];

            const appointments = {
                '2024-8-24': 'Terapia de Mindfulness a las 10:00 AM',
                '2024-9-1': 'Sesión de Seguimiento a las 2:00 PM'
            };

            // Lógica para el calendario
            const renderCalendar = () => {
                const firstDay = new Date(currentYear, currentMonth, 1);
                const lastDay = new Date(currentYear, currentMonth + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startDayOffset = (firstDay.getDay() + 6) % 7; // Lunes es 0
                
                calendarTitle.textContent = `${months[currentMonth]} ${currentYear}`;
                calendarBody.innerHTML = ''; // Limpia el calendario

                // Días vacíos al inicio del mes
                for (let i = 0; i < startDayOffset; i++) {
                    const emptyCell = document.createElement('div');
                    calendarBody.appendChild(emptyCell);
                }

                // Días del mes
                for (let i = 1; i <= daysInMonth; i++) {
                    const dayCell = document.createElement('div');
                    dayCell.classList.add('day-cell', 'flex', 'items-center', 'justify-center', 'p-2', 'rounded-full', 'cursor-pointer', 'transition-colors', 'hover:bg-gray-200');
                    dayCell.textContent = i;
                    dayCell.dataset.day = i;

                    const appointmentKey = `${currentYear}-${currentMonth}-${i}`;
                    
                    // Marca el día de la cita
                    if (appointments[appointmentKey]) {
                        dayCell.classList.add('bg-red-200', 'text-red-700', 'font-bold', 'has-appointment', 'hover:bg-red-300');
                    }

                    // Añade un evento al hacer clic en el día
                    dayCell.addEventListener('click', (event) => {
                        const day = event.target.dataset.day;
                        selectedDateEl.textContent = `Has seleccionado el día ${day} de ${months[currentMonth].toLowerCase()} de ${currentYear}.`;
                        appointmentDetails.classList.remove('hidden');

                        if (appointments[appointmentKey]) {
                            appointmentInfoEl.innerHTML = `<strong>¡Tienes una cita programada!</strong><br>Detalles: ${appointments[appointmentKey]}`;
                        } else {
                            appointmentInfoEl.textContent = 'No hay citas programadas para este día.';
                        }
                    });

                    calendarBody.appendChild(dayCell);
                }
            };

            const changeMonth = (direction) => {
                currentMonth += direction;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                } else if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar();
            };

            prevMonthBtn.addEventListener('click', () => changeMonth(-1));
            nextMonthBtn.addEventListener('click', () => changeMonth(1));
            
            // Renderiza el calendario cuando la página carga
            renderCalendar();

            document.getElementById('back-to-main').addEventListener('click', () => {
                window.history.back();
            });
        });
    </script>
</body>
</html>