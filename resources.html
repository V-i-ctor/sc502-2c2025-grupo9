<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursos Guardados</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans text-gray-800">
    <!-- Sección de Recursos guardados -->
    <div class="flex-1 flex flex-col max-w-2xl mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in">
        <!-- Botón para volver al panel principal -->
        <button id="back-to-main" class="self-start mb-6 flex items-center text-gray-600 hover:text-blue-500 transition-colors">
            <span class="material-icons transform rotate-180">chevron_right</span>
            <span class="ml-2 font-medium">Volver al Panel Principal</span>
        </button>

        <!-- Título de la sección -->
        <h2 class="text-3xl font-bold text-gray-900 mb-6">Recursos Guardados</h2>

        <!-- Botón para agregar nuevo recurso -->
        <button id="add-resource-btn" class="mb-6 flex items-center justify-center bg-purple-500 text-white px-6 py-3 rounded-full hover:bg-purple-600 transition-colors">
            <span class="material-icons mr-2">add</span>
            Agregar Recurso
        </button>

        <!-- Contenedor de la lista de recursos -->
        <div id="resources-container" class="space-y-4">
            <!-- Recurso 1: con botón de eliminar -->
            <div id="resource-1" class="bg-white p-5 rounded-2xl shadow-sm flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <span class="material-icons text-4xl text-blue-500">book</span>
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">El poder del ahora</h3>
                        <p class="text-sm text-gray-600">Eckhart Tolle</p>
                        <p class="text-xs text-gray-500 mt-1">Libro de crecimiento personal</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button class="favorite-btn text-gray-400 hover:text-yellow-500 transition-colors">
                        <span class="material-icons text-2xl">star_border</span>
                    </button>
                    <button class="delete-resource-btn text-gray-400 hover:text-red-500 transition-colors" data-resource-id="resource-1">
                        <span class="material-icons text-2xl">delete</span>
                    </button>
                </div>
            </div>

            <!-- Recurso 2: con botón de eliminar -->
            <div id="resource-2" class="bg-white p-5 rounded-2xl shadow-sm flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <span class="material-icons text-4xl text-green-500">psychology</span>
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">Inteligencia emocional</h3>
                        <p class="text-sm text-gray-600">Daniel Goleman</p>
                        <p class="text-xs text-gray-500 mt-1">Libro de psicología</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button class="favorite-btn text-yellow-500 hover:text-gray-400 transition-colors">
                        <span class="material-icons text-2xl">star</span>
                    </button>
                    <button class="delete-resource-btn text-gray-400 hover:text-red-500 transition-colors" data-resource-id="resource-2">
                        <span class="material-icons text-2xl">delete</span>
                    </button>
                </div>
            </div>

            <!-- Recurso 3: Video -->
            <div id="resource-3" class="bg-white p-5 rounded-2xl shadow-sm flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <span class="material-icons text-4xl text-red-500">play_circle</span>
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">Meditación para principiantes</h3>
                        <p class="text-sm text-gray-600">Canal Mindfulness</p>
                        <p class="text-xs text-gray-500 mt-1">Video de YouTube - 15 min</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button class="favorite-btn text-gray-400 hover:text-yellow-500 transition-colors">
                        <span class="material-icons text-2xl">star_border</span>
                    </button>
                    <button class="delete-resource-btn text-gray-400 hover:text-red-500 transition-colors" data-resource-id="resource-3">
                        <span class="material-icons text-2xl">delete</span>
                    </button>
                </div>
            </div>

            <!-- Recurso 4: Artículo -->
            <div id="resource-4" class="bg-white p-5 rounded-2xl shadow-sm flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <span class="material-icons text-4xl text-teal-500">article</span>
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">5 técnicas para manejar la ansiedad</h3>
                        <p class="text-sm text-gray-600">Revista Psicología Hoy</p>
                        <p class="text-xs text-gray-500 mt-1">Artículo web - 8 min lectura</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button class="favorite-btn text-gray-400 hover:text-yellow-500 transition-colors">
                        <span class="material-icons text-2xl">star_border</span>
                    </button>
                    <button class="delete-resource-btn text-gray-400 hover:text-red-500 transition-colors" data-resource-id="resource-4">
                        <span class="material-icons text-2xl">delete</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mensaje cuando no hay recursos -->
        <div id="empty-state" class="hidden text-center py-12">
            <span class="material-icons text-6xl text-gray-300 mb-4">bookmark_border</span>
            <h3 class="text-xl font-semibold text-gray-500 mb-2">No hay recursos guardados</h3>
            <p class="text-gray-400">Agrega recursos que te sean útiles para tu bienestar</p>
        </div>

        <!-- Modal para agregar recurso -->
        <div id="add-resource-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                <h3 class="text-xl font-bold mb-4">Agregar Nuevo Recurso</h3>
                <form id="add-resource-form">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Título</label>
                        <input type="text" id="resource-title" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500" placeholder="Título del recurso">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Autor/Fuente</label>
                        <input type="text" id="resource-author" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500" placeholder="Autor o fuente">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo</label>
                        <select id="resource-type" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500">
                            <option value="book">Libro</option>
                            <option value="video">Video</option>
                            <option value="article">Artículo</option>
                            <option value="podcast">Podcast</option>
                        </select>
                    </div>
                    <div class="flex space-x-3">
                        <button type="button" id="cancel-add" class="flex-1 py-3 px-4 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">
                            Cancelar
                        </button>
                        <button type="submit" class="flex-1 py-3 px-4 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors">
                            Agregar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const resourcesContainer = document.getElementById('resources-container');
            const emptyState = document.getElementById('empty-state');
            const addResourceBtn = document.getElementById('add-resource-btn');
            const addResourceModal = document.getElementById('add-resource-modal');
            const addResourceForm = document.getElementById('add-resource-form');
            const cancelAddBtn = document.getElementById('cancel-add');
            
            let resourceCounter = 4;

            // Función para verificar si hay recursos y mostrar/ocultar estado vacío
            const checkEmptyState = () => {
                const resources = resourcesContainer.querySelectorAll('[id^="resource-"]');
                if (resources.length === 0) {
                    emptyState.classList.remove('hidden');
                    resourcesContainer.classList.add('hidden');
                } else {
                    emptyState.classList.add('hidden');
                    resourcesContainer.classList.remove('hidden');
                }
            };

            // Función para obtener el icono según el tipo
            const getResourceIcon = (type) => {
                const icons = {
                    book: 'book',
                    video: 'play_circle',
                    article: 'article',
                    podcast: 'mic'
                };
                return icons[type] || 'book';
            };

            // Función para obtener el color según el tipo
            const getResourceColor = (type) => {
                const colors = {
                    book: 'text-blue-500',
                    video: 'text-red-500',
                    article: 'text-teal-500',
                    podcast: 'text-purple-500'
                };
                return colors[type] || 'text-blue-500';
            };

            // Lógica para eliminar recursos
            const handleDeleteResource = (event) => {
                const resourceId = event.currentTarget.dataset.resourceId;
                const resourceElement = document.getElementById(resourceId);
                if (resourceElement) {
                    resourceElement.remove();
                    checkEmptyState();
                }
            };

            // Lógica para marcar/desmarcar favoritos
            const handleToggleFavorite = (event) => {
                const icon = event.currentTarget.querySelector('.material-icons');
                const button = event.currentTarget;
                
                if (icon.textContent === 'star_border') {
                    icon.textContent = 'star';
                    button.classList.remove('text-gray-400', 'hover:text-yellow-500');
                    button.classList.add('text-yellow-500', 'hover:text-gray-400');
                } else {
                    icon.textContent = 'star_border';
                    button.classList.remove('text-yellow-500', 'hover:text-gray-400');
                    button.classList.add('text-gray-400', 'hover:text-yellow-500');
                }
            };

            // Agregar event listeners a los botones existentes
            document.querySelectorAll('.delete-resource-btn').forEach(button => {
                button.addEventListener('click', handleDeleteResource);
            });

            document.querySelectorAll('.favorite-btn').forEach(button => {
                button.addEventListener('click', handleToggleFavorite);
            });

            // Mostrar modal para agregar recurso
            addResourceBtn.addEventListener('click', () => {
                addResourceModal.classList.remove('hidden');
            });

            // Cerrar modal
            cancelAddBtn.addEventListener('click', () => {
                addResourceModal.classList.add('hidden');
                addResourceForm.reset();
            });

            // Cerrar modal al hacer clic fuera
            addResourceModal.addEventListener('click', (event) => {
                if (event.target === addResourceModal) {
                    addResourceModal.classList.add('hidden');
                    addResourceForm.reset();
                }
            });

            // Agregar nuevo recurso
            addResourceForm.addEventListener('submit', (event) => {
                event.preventDefault();
                
                const title = document.getElementById('resource-title').value.trim();
                const author = document.getElementById('resource-author').value.trim();
                const type = document.getElementById('resource-type').value;

                if (!title || !author) {
                    alert('Por favor, completa todos los campos');
                    return;
                }

                resourceCounter++;
                const newResourceId = `resource-${resourceCounter}`;
                const icon = getResourceIcon(type);
                const color = getResourceColor(type);

                const resourceHTML = `
                    <div id="${newResourceId}" class="bg-white p-5 rounded-2xl shadow-sm flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="material-icons text-4xl ${color}">${icon}</span>
                            <div>
                                <h3 class="text-lg font-bold text-gray-900">${title}</h3>
                                <p class="text-sm text-gray-600">${author}</p>
                                <p class="text-xs text-gray-500 mt-1">${type.charAt(0).toUpperCase() + type.slice(1)}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="favorite-btn text-gray-400 hover:text-yellow-500 transition-colors">
                                <span class="material-icons text-2xl">star_border</span>
                            </button>
                            <button class="delete-resource-btn text-gray-400 hover:text-red-500 transition-colors" data-resource-id="${newResourceId}">
                                <span class="material-icons text-2xl">delete</span>
                            </button>
                        </div>
                    </div>
                `;

                resourcesContainer.insertAdjacentHTML('beforeend', resourceHTML);

                // Agregar event listeners al nuevo recurso
                const newResource = document.getElementById(newResourceId);
                newResource.querySelector('.delete-resource-btn').addEventListener('click', handleDeleteResource);
                newResource.querySelector('.favorite-btn').addEventListener('click', handleToggleFavorite);

                // Cerrar modal y resetear formulario
                addResourceModal.classList.add('hidden');
                addResourceForm.reset();
                checkEmptyState();
            });

            // Verificar estado inicial
            checkEmptyState();

            document.getElementById('back-to-main').addEventListener('click', () => {
                window.history.back();
            });
        });
    </script>
</body>
</html>